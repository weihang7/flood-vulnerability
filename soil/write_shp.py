from netCDF4 import *
import shapefile

rootgrp = Dataset("soilw.mon.mean.v2.nc", "r")

soil = rootgrp.variables['soilw']

w = shapefile.Writer(shapefile.POINT)
w.autoBalance = 1

times = rootgrp.dimensions["time"]
lats = rootgrp.variables['lat']
lons = rootgrp.variables['lon']

w.field("SOILW", "C")
for j in range(0, len(rootgrp.dimensions["lat"])):
    for k in range(0, len(rootgrp.dimensions["lon"])):
        sv = soil[-1, j, k]
        w.point(lats[j], lons[k])
        w.record(sv)

w.save('soilw')
